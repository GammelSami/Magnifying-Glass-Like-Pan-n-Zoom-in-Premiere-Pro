<!DOCTYPE html>
<!-- This document forms the dockable panel. -->
<html>
	<head>
		<meta charset="utf-8">
		<title>Motion Control Panel</title>
		<link rel="stylesheet" href="css/style.css">
		<script src="./lib/CSInterface.js"></script>
    <!-- USE konva DEVELOPMENT VERSION --><script src="lib/konva.min.js"></script>
		<script src="js/functions.js"></script>
		<script>
			const DEBUG = true;
			var cs = new CSInterface();
		</script>
	</head>
	<body>
		<div id="debugArea">
			<details>
				<summary>Premiere Debug Area</summary>
				<fieldset>
					<textarea id="debugLog" disabled style="position:absolute;right:15px;width:35%;height:250px;"></textarea>
					<legend>Setter/Getter Demo</legend>
					sequenceWidth: 	<input type="number" id="sequenceWidth"><br>
					sequenceHeight: <input type="number" id="sequenceHeight"><br>
					clipPositionX: 	<input type="number" id="clipPositionX"><br>
					clipPositionY: 	<input type="number" id="clipPositionY"><br>
					clipScale:			<input type="number" id="clipScale"><br>
					clipScaleW:			<input type="number" id="clipScaleW"><br>
					clipScaleSync:	<input type="checkbox" id="clipScaleSync"><br>
					clipRotation:			<input type="number" id="clipRotation"><br>
					clipAnchorPointX:		<input type="number" id="clipAnchorPointX"><br>
					clipAnchorPointY:		<input type="number" id="clipAnchorPointY"><br>

					clipWidth: 		<input type="number" id="clipWidth" disabled><br>
					clipHeight:	 	<input type="number" id="clipHeight" disabled><br>
					<button onclick="applyToPremiere();">applyToPremiere</button><br>
				</fieldset>
			</details>
			<details>
				<summary>Knova Debug Area</summary>
				<fieldset>
					stageWidth: 			<input type="number" id="stageWidth"><br>
					stageHeight: 			<input type="number" id="stageHeight"><br>
					spotlightX: 			<input type="number" id="spotlightX"><br>
					spotlightY: 			<input type="number" id="spotlightY"><br>
					spotlightOffsetX: <input type="number" id="spotlightOffsetX"><br>
					spotlightOffsetY: <input type="number" id="spotlightOffsetY"><br>
					spotlightHeight: 	<input type="number" id="spotlightHeight"><br>
					spotlightWidth: 	<input type="number" id="spotlightWidth"><br>
					spotlightScaleX: 	<input type="number" id="spotlightScaleX"><br>
					spotlightScaleY: 	<input type="number" id="spotlightScaleY"><br>
					<button onclick="applyToKonva()">applyToKonva</button>
					<button onclick="fetchFromKonva()">fetchFromKonva</button>
				</fieldset>
			</details>
		</div>
		<div id="stage">Something went wrong. Try to reload the Panel or press F5 for soft reload.</div><br>
		<button onclick="premiereToKonva();">premiereToKonva</button>
		<button onclick="konvaToPremiere();">konvaToPremiere</button>
	</body>
</html>



<script>//footer script
//hide debug area
if (!DEBUG) document.getElementById('debugArea').style.display = 'none';
</script>



<script>//konva stuff

/********** init conva objects **********/

var stage = new Konva.Stage({
	container: 'stage',
	width: 100,
	height: 100
});

var layer = new Konva.Layer();
stage.add(layer);

var spotlight = new Konva.Rect({
	fill: 'red',
	name: 'spotlight',
	stroke: 'black',
	draggable: true
});
layer.add(spotlight);

var text = new Konva.Text({
	x: 5,
	y: 5
});
layer.add(text);

// create new transformer
var tr = new Konva.Transformer();
layer.add(tr);
tr.attachTo(spotlight);
premiereToKonva();

//debug stuff
if (DEBUG) {
	//debug text
	var text = new Konva.Text({
		x: 5,
		y: 5,
		fill: '#B9B9B9' //textcolor from css
	});
	layer.add(text);
	updateText();
}

</script>



<script src="js/events.js">//add event listeners</script>
